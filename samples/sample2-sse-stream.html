<!doctype html><html lang='ko'><head><meta charset='utf-8'/><title>Sample2 - SSE</title><style>.progress{height:8px;background:#eee;border-radius:8px;overflow:hidden}.bar{height:100%;background:#0a84ff;width:0%}</style></head><body><h1>Sample2 - SSE Stream</h1><div class='progress'><div class='bar' id='bar'></div></div><pre id='log'></pre><script type='module'>import { DOMLifeCore, SSEBridge } from '../src/domlife.js';const core=new DOMLifeCore();const sse=new SSEBridge({state:core.state,bus:core.bus});const log=m=>{const el=document.getElementById('log');el.textContent+=m+'\n';};const bar=document.getElementById('bar');sse.subscribe('../src/gnu/domlife.stream.php',{onOpen(){log('[open]')},onMessage(e){try{const d=JSON.parse(e.data); if(d.percent!=null){bar.style.width=d.percent+'%'; log('progress '+d.percent+'%')} if(d.html){log('patch HTML')} if(d.ok){log('done')}}catch(err){}},onError(e){log('[error]')},onClose(){log('[close]')}});</script></body></html>