const isStr=v=>typeof v==='string';export class ViewAdapter{constructor(r=document){this.root=r}read(b,t){const{el,a}=this._r(b);if(!el)return; if(a)return el.getAttribute(a); if(t==='checkbox')return el.checked; if(t==='radio'){const name=el.name;const s=this.root.querySelector(`input[type=radio][name="${name}"]:checked`);return s?.value}return el.value}write(b,t,v){const{el,a}=this._r(b);if(!el)return; if(a){el.setAttribute(a,String(v??''));return} if(t==='checkbox'){el.checked=!!v;return} if(t==='radio'){const name=el.name;this.root.querySelectorAll(`input[type=radio][name="${name}"]`).forEach(r=>{r.checked=(r.value===String(v))});return} el.value=v??''}showError(b,m){const{el}=this._r(b);if(!el)return; el.classList.add('domlife-error');el.setAttribute('aria-invalid','true');const id=`${el.id||el.name||'dl'}-err`;let h=this.root.getElementById(id)||this.root.querySelector('#'+id);if(!h){h=this.root.createElement('div');h.id=id;h.className='domlife-error-hint';el.insertAdjacentElement('afterend',h)}h.textContent=m}clearError(b){const{el}=this._r(b);if(!el)return; el.classList.remove('domlife-error');el.removeAttribute('aria-invalid');const id=`${el.id||el.name||'dl'}-err`;const h=this.root.getElementById(id)||this.root.querySelector('#'+id);h?.remove?.()}_r(b){if(isStr(b))return{el:this.root.querySelector(b),a:null};const s=b?.selector??null;const a=b?.attr??null;const el=s?this.root.querySelector(s):null;return {el,a}}}