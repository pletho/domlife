export class RegionManager{constructor(r=document){this.root=r;this.map=new Map}add(id,sel,{ariaBusy:ab=true,spinner:sp=true}={}){const el=this.root.querySelector(sel);if(!el)throw new Error('Region not found: '+sel);el.setAttribute('data-region',id);this.map.set(id,{el,selector:sel,ariaBusy:ab,spinner:sp});return this}get(id){return this.map.get(id)?.el||null}setLoading(id,on=true){const r=this.map.get(id);if(!r)return;if(r.ariaBusy)r.el.setAttribute('aria-busy',on?'true':'false');if(r.spinner)r.el.classList.toggle('dl-loading',on);try{window?.dispatchEvent?.(new CustomEvent('dl:region:loading',{detail:{id,on}}))}catch{}}render(id,html){const el=this.get(id);if(!el)return;el.innerHTML=html;try{window?.dispatchEvent?.(new CustomEvent('dl:region:render',{detail:{id}}))}catch{}}show(id){const el=this.get(id);if(!el)return;el.removeAttribute('aria-hidden');el.classList.remove('hidden')}hide(id){const el=this.get(id);if(!el)return;el.setAttribute('aria-hidden','true');el.classList.add('hidden')}}