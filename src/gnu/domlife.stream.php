<?php header('Content-Type: text/event-stream'); header('Cache-Control: no-cache'); header('Connection: keep-alive'); function sse_send($event,$data){ echo "event: {$event}\n"; echo "data: ".json_encode($data, JSON_UNESCAPED_UNICODE)."\n\n"; @ob_flush(); @flush(); } $steps=5; for($i=1;$i<=$steps;$i++){ sse_send('progress',['step'=>$i,'total'=>$steps,'percent'=>intval($i*100/$steps),'msg'=>'processing '.$i.'/'.$steps]); usleep(600000);} sse_send('patch',['html'=>'<strong>서버 패치 콘텐츠</strong>']); sse_send('done',['ok'=>true,'time'=>date('c')]);