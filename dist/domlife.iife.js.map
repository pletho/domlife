{"version":3,"file":"domlife.iife.js","sources":["../src/core/state.js","../src/core/region.js","../src/core/seo.js","../src/core/view.js","../src/core/utils.js","../src/core/request.js","../src/domlife.js","../src/core/sse.js"],"sourcesContent":["export const DL_STATE=Object.freeze({EVENT_REQUESTED:'event:requested',BROWSER_RECOGNIZED:'browser:recognized',SERVER_SENT:'server:sent',SERVER_PROCESSING:'server:processing',SERVER_STREAMING:'server:streaming',SERVER_RESPONDED:'server:responded',BROWSER_RECEIVING:'browser:receiving',DOM_RENDERING:'dom:rendering',CLIENT_PROCESSING:'client:processing',CLIENT_DONE:'client:done',LOADING_END:'loading:end',RETRY_WAITING:'retry:waiting'});export class Emitter{constructor(){this.map=new Map()}on(t,f){this.map.has(t)||this.map.set(t,new Set);this.map.get(t).add(f);return()=>this.map.get(t).delete(f)}off(t,f){this.map.get(t)?.delete(f)}emit(t,p){this.map.get(t)?.forEach(f=>{try{f(p)}catch(e){}})}}export class StateMachine{constructor(b,i=DL_STATE.LOADING_END){this.bus=b;this.current=i;this.hooks=new Map}on(s,f){this.hooks.has(s)||this.hooks.set(s,new Set);this.hooks.get(s).add(f);return()=>this.hooks.get(s).delete(f)}async to(n,p={}){const r=this.current;if(r===n)return;try{window?.dispatchEvent?.(new CustomEvent('dl:state:exit',{detail:{prev:r,next:n,payload:p}}))}catch{}this.bus.emit('state:exit',{prev:r,next:n,payload:p});this.current=n;try{window?.dispatchEvent?.(new CustomEvent('dl:state:enter',{detail:{prev:r,next:n,payload:p}}));window?.dispatchEvent?.(new CustomEvent(`dl:state:${n}`,{detail:{prev:r,next:n,payload:p}}))}catch{}this.bus.emit('state:enter',{prev:r,next:n,payload:p});this.bus.emit('state:change',{prev:r,next:n,payload:p});const set=this.hooks.get(n);if(set){for(const f of set){try{await f({prev:r,next:n,payload:p})}catch(e){}}}}}","export class RegionManager{constructor(r=document){this.root=r;this.map=new Map}add(id,sel,{ariaBusy:ab=true,spinner:sp=true}={}){const el=this.root.querySelector(sel);if(!el)throw new Error('Region not found: '+sel);el.setAttribute('data-region',id);this.map.set(id,{el,selector:sel,ariaBusy:ab,spinner:sp});return this}get(id){return this.map.get(id)?.el||null}setLoading(id,on=true){const r=this.map.get(id);if(!r)return;if(r.ariaBusy)r.el.setAttribute('aria-busy',on?'true':'false');if(r.spinner)r.el.classList.toggle('dl-loading',on);try{window?.dispatchEvent?.(new CustomEvent('dl:region:loading',{detail:{id,on}}))}catch{}}render(id,html){const el=this.get(id);if(!el)return;el.innerHTML=html;try{window?.dispatchEvent?.(new CustomEvent('dl:region:render',{detail:{id}}))}catch{}}show(id){const el=this.get(id);if(!el)return;el.removeAttribute('aria-hidden');el.classList.remove('hidden')}hide(id){const el=this.get(id);if(!el)return;el.setAttribute('aria-hidden','true');el.classList.add('hidden')}}","export class SEOManager{constructor(d=document){this.doc=d}title(t){if(t!=null)this.doc.title=String(t);return this.doc.title}meta(n,c){let el=this.doc.querySelector(`meta[name=\"${n}\"]`);if(!el){el=this.doc.createElement('meta');el.setAttribute('name',n);this.doc.head.appendChild(el)}el.setAttribute('content',c);return el}link(rel,href){let el=this.doc.querySelector(`link[rel=\"${rel}\"]`);if(!el){el=this.doc.createElement('link');el.setAttribute('rel',rel);this.doc.head.appendChild(el)}el.setAttribute('href',href);return el}jsonLD(id,obj){let el=this.doc.getElementById(id);if(!el){el=this.doc.createElement('script');el.type='application/ld+json';el.id=id;this.doc.head.appendChild(el)}el.textContent=JSON.stringify(obj);return el}}","const isStr=v=>typeof v==='string';export class ViewAdapter{constructor(r=document){this.root=r}read(b,t){const{el,a}=this._r(b);if(!el)return; if(a)return el.getAttribute(a); if(t==='checkbox')return el.checked; if(t==='radio'){const name=el.name;const s=this.root.querySelector(`input[type=radio][name=\"${name}\"]:checked`);return s?.value}return el.value}write(b,t,v){const{el,a}=this._r(b);if(!el)return; if(a){el.setAttribute(a,String(v??''));return} if(t==='checkbox'){el.checked=!!v;return} if(t==='radio'){const name=el.name;this.root.querySelectorAll(`input[type=radio][name=\"${name}\"]`).forEach(r=>{r.checked=(r.value===String(v))});return} el.value=v??''}showError(b,m){const{el}=this._r(b);if(!el)return; el.classList.add('domlife-error');el.setAttribute('aria-invalid','true');const id=`${el.id||el.name||'dl'}-err`;let h=this.root.getElementById(id)||this.root.querySelector('#'+id);if(!h){h=this.root.createElement('div');h.id=id;h.className='domlife-error-hint';el.insertAdjacentElement('afterend',h)}h.textContent=m}clearError(b){const{el}=this._r(b);if(!el)return; el.classList.remove('domlife-error');el.removeAttribute('aria-invalid');const id=`${el.id||el.name||'dl'}-err`;const h=this.root.getElementById(id)||this.root.querySelector('#'+id);h?.remove?.()}_r(b){if(isStr(b))return{el:this.root.querySelector(b),a:null};const s=b?.selector??null;const a=b?.attr??null;const el=s?this.root.querySelector(s):null;return {el,a}}}","export const isFn=v=>typeof v==='function';export const isStr=v=>typeof v==='string';export const isObj=v=>v&&typeof v==='object'&&!Array.isArray(v);export const deepMerge=(a={},b={})=>{const o={...a};for(const k of Object.keys(b)){const av=a[k],bv=b[k];o[k]=(isObj(av)&&isObj(bv))?deepMerge(av,bv):bv;}return o;};export const debounce=(fn,ms=250)=>{let t;return(...args)=>{clearTimeout(t);t=setTimeout(()=>fn(...args),ms);};};export const backoff=(i,base=200)=>new Promise(r=>setTimeout(r,base*(2**i)));","import { DL_STATE } from './state.js'; import { backoff } from './utils.js'; export class RequestOrchestrator{constructor({state,server,regions,seo,bus}){this.state=state;this.server=server;this.regions=regions;this.seo=seo;this.bus=bus}async run({regionId,op='query',path='/',body={},render,timeout=10000,retries=1}){await this.state.to(DL_STATE.EVENT_REQUESTED,{regionId,op});await this.state.to(DL_STATE.BROWSER_RECOGNIZED,{regionId,op});this.regions?.setLoading(regionId,true);await this.state.to(DL_STATE.SERVER_SENT,{path});await this.state.to(DL_STATE.SERVER_PROCESSING,{});let resp;for(let i=0;i<=retries;i++){try{resp=await this.server[op](path,body,{timeout});break;}catch(e){if(i===retries){this.regions?.setLoading(regionId,false);throw e;}await this.state.to(DL_STATE.RETRY_WAITING,{i});await backoff(i);}}await this.state.to(DL_STATE.SERVER_RESPONDED,{resp});await this.state.to(DL_STATE.BROWSER_RECEIVING,{});if(render){await this.state.to(DL_STATE.DOM_RENDERING,{});try{render(resp,this.regions,this.seo);}catch(e){}}await this.state.to(DL_STATE.CLIENT_PROCESSING,{});await this.state.to(DL_STATE.CLIENT_DONE,{});this.regions?.setLoading(regionId,false);await this.state.to(DL_STATE.LOADING_END,{});return resp}}","export { DL_STATE, Emitter, StateMachine } from './core/state.js'; export { RegionManager } from './core/region.js'; export { SEOManager } from './core/seo.js'; export { ViewAdapter } from './core/view.js'; export { RequestOrchestrator } from './core/request.js'; export { SSEBridge } from './core/sse.js'; export { debounce, backoff, deepMerge } from './core/utils.js'; import { Emitter, StateMachine, DL_STATE } from './core/state.js'; import { RegionManager } from './core/region.js'; import { SEOManager } from './core/seo.js'; import { ViewAdapter } from './core/view.js'; import { RequestOrchestrator } from './core/request.js'; export class DOMLifeCore{constructor(){this.bus=new Emitter();this.state=new StateMachine(this.bus);this.regions=new RegionManager(document);this.seo=new SEOManager(document);this.view=new ViewAdapter(document);this.server={async query(p,b){const r=await fetch(p,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(b||{})});if(!r.ok)throw new Error('HTTP '+r.status);return r.json().catch(()=>({}))},async create(p,b){return this.query(p,b)},async read(p,b){return this.query(p,b)},async update(p,b){return this.query(p,b)},async delete(p,b){return this.query(p,b)},};this.request=new RequestOrchestrator({state:this.state,server:this.server,regions:this.regions,seo:this.seo,bus:this.bus})}use({server,view,seo,regions}={}){if(server)this.server=server;if(view)this.view=view;if(seo)this.seo=seo;if(regions)this.regions=regions;this.request=new RequestOrchestrator({state:this.state,server:this.server,regions:this.regions,seo:this.seo,bus:this.bus});return this}region(id,sel,opts){this.regions.add(id,sel,opts);return this}onState(s,fn){return this.state.on(s,fn)}}","import { DL_STATE } from './state.js'; export class SSEBridge{constructor({state,bus}){this.state=state;this.bus=bus;this.es=null}subscribe(url,{onOpen,onMessage,onError,onClose}={}){if(this.es) this.es.close();this.es=new EventSource(url);this.state.to(DL_STATE.SERVER_STREAMING,{url});this.es.onopen=(e)=>{try{onOpen?.(e)}catch{}};this.es.onmessage=(e)=>{try{onMessage?.(e)}catch{}};this.es.onerror=(e)=>{try{onError?.(e)}catch{}};const close=()=>{try{this.es?.close()}catch{};this.es=null;try{onClose?.()}catch{}};return close}}"],"names":["DL_STATE","Object","freeze","EVENT_REQUESTED","BROWSER_RECOGNIZED","SERVER_SENT","SERVER_PROCESSING","SERVER_STREAMING","SERVER_RESPONDED","BROWSER_RECEIVING","DOM_RENDERING","CLIENT_PROCESSING","CLIENT_DONE","LOADING_END","RETRY_WAITING","Emitter","constructor","this","map","Map","on","t","f","has","set","Set","get","add","delete","off","emit","p","forEach","e","StateMachine","b","i","bus","current","hooks","s","to","n","r","window","dispatchEvent","CustomEvent","detail","prev","next","payload","RegionManager","document","root","id","sel","ariaBusy","ab","spinner","sp","el","querySelector","Error","setAttribute","selector","setLoading","classList","toggle","render","html","innerHTML","show","removeAttribute","remove","hide","SEOManager","d","doc","title","String","meta","c","createElement","head","appendChild","link","rel","href","jsonLD","obj","getElementById","type","textContent","JSON","stringify","ViewAdapter","read","a","_r","getAttribute","checked","name","value","write","v","querySelectorAll","showError","m","h","className","insertAdjacentElement","clearError","attr","isObj","Array","isArray","deepMerge","o","k","keys","av","bv","backoff","base","Promise","setTimeout","RequestOrchestrator","state","server","regions","seo","run","regionId","op","path","body","timeout","retries","resp","view","query","fetch","method","headers","ok","status","json","catch","create","update","request","use","region","opts","onState","fn","es","subscribe","url","onOpen","onMessage","onError","onClose","close","EventSource","onopen","onmessage","onerror","ms","args","clearTimeout"],"mappings":"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"}